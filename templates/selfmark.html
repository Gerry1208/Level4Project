{% extends 'base.html' %}

{% load staticfiles %}
{% load user_agents %}

{% block title %} Mark yourself! {% endblock %}

{% block body_block %}
    <div class="container">
        {% if not request|is_mobile %}
            <div id="page" class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main">
        {% endif %}
        {% if request|is_mobile %}
            <div id="page">
        {% endif %}
        {% ifequal count 10%}
            <br>
            <a class="btn btn-primary btn-block" href="{% url "complete" %}?score={{ score }}" role="button">Finish!</a>
        {% else %}
             <a class="btn btn-primary btn-sm" href="{% url "groupview" %}" role="button">Quit and Return to groups</a>

            {% if cards %}
                <h3>Who is this person?:</h3>
                <div class="row">
                    <div class="col-md-6">
                        <div id="card" class="card">
                            <div class="front" style="height:100%; width:100%">
                                <img id="picture" class="img-thumbnail" src="/media/{{ pictures.2 }}" />
                            </div>
                            <div class="back" style="height:100%; width:100%">
                                <div class="row">
                                    <h2>{{ cards.1 }}</h2>

                                    <button type="button" onclick='answeredq(value)' class="btn btn-lg btn-success" value="correct" id="correct"><span class="glyphicon glyphicon-thumbs-up"></span></button>
                                    <button type="button" onclick='answeredq(value)' class="btn btn-lg btn-danger" value="wrong" id="wrong"><span class="glyphicon glyphicon-thumbs-down"></span></button>

                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <br>
            {% endif %}
        {% endifequal %}
        </div>
        </div>

        <script>

            $('#card').flip({
                axis: 'y',
                trigger: 'click'
            })

            function answeredq(value) {
                score = {{ score }}
                if (value == "correct") {
                    score++
                }



                $.ajax({
                    url:'{% url "selfmark" %}',
                    type:"GET",
                    data:{score:score},
                    success:function(data){
                        $("#page").html(data)
                    }
                })
            }

        </script>

{% endblock %}